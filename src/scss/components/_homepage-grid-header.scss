$homepage-animation-duration: 5;
$homepage-animation-sub-duration: $homepage-animation-duration / 4;

$text-colors: (
  1: #75a3cd,
  2: #8f9a17,
  3: #c26533
);

// Animation names have the homepage prefix for names to not match other animation names in the project
@keyframes homepageFadeInOut {
  0%,
  100% {
    opacity: 0;
  }

  50% {
    opacity: 1;
  }
}

@keyframes homepageSlideInOut {
  0% {
    opacity: 0;
    margin-left: $spacing-8;
  }

  50% {
    opacity: 1;
    margin-left: 0;
  }

  100% {
    opacity: 0;
  }
}

@keyframes homepageSlideIn {
  0% {
    opacity: 0;
    margin-left: $spacing-8;
  }

  100% {
    opacity: 1;
    margin-left: 0;
  }
}

@keyframes homepageFadeOut {
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
}

@keyframes homepageFadeIn {
  0% {
    opacity: 0;
  }

  100% {
    opacity: 1;
  }
}

@include make-color-animation($text-colors);

.homepage-header {
  margin-top: $spacing-4;
  margin-bottom: $spacing-4;
  color: $navy;
  overflow: hidden;

  @include breakpoint(md) {
    margin-top: $spacing-5;
    margin-bottom: $spacing-2;
  }

  @include breakpoint(lg) {
    margin-top: $spacing-7;
  }

  @include breakpoint(xl) {
    margin-top: $spacing-8;
  }
}

.homepage-title {
  font-family: $font-family-sans-serif;
  font-weight: $font-weight-semibold;
  font-size: $typescale-4;
  text-transform: uppercase;
  letter-spacing: rem(2);
  overflow: hidden;
  animation: #{$homepage-animation-sub-duration / 4}s ease-out #{$homepage-animation-sub-duration *
    3}s forwards;

  .run-animation & {
    animation-name: homepageFadeOut;
  }

  @include breakpoint(md) {
    font-weight: $font-weight-normal;
    font-size: rem(32);
  }

  @include breakpoint(lg) {
    font-weight: $font-weight-light;
    font-size: $typescale-10;
  }

  &:first-child {
    position: absolute;
  }

  .homepage-title--transition-state {
    display: block;
    opacity: 0;
    width: 100%;
    animation: #{$homepage-animation-sub-duration +
      ($homepage-animation-sub-duration / 2)}s ease-in-out;
    animation-play-state: inherit;
    font-size: $typescale-8;

    .run-animation & {
      animation-name: homepageSlideInOut;
    }

    strong {
      color: $color-language-schools;
      font-weight: $font-weight-semibold;
    }

    &:not(:last-child) {
      position: absolute;
    }

    @include breakpoint(md) {
      strong {
        font-weight: $font-weight-bold;
      }
    }

    @include breakpoint(lg) {
      font-size: $typescale-10;

      strong {
        font-weight: $font-weight-semibold;
      }
    }

    @for $i from 1 through 3 {
      &:nth-child(#{$i}) {
        animation-delay: #{($homepage-animation-sub-duration) * ($i - 1)}s;

        strong {
          color: map-get($text-colors, $i);
        }
      }
    }
  }

  &.homepage-title--final-state {
    opacity: 0;
    animation: #{$homepage-animation-sub-duration -
      ($homepage-animation-sub-duration / 4)}s ease-in #{(
        $homepage-animation-sub-duration * 3
      ) + ($homepage-animation-sub-duration / 4)}s forwards;
    font-weight: $font-weight-semibold;
    font-size: $typescale-8;
    width: 100%;

    .run-animation & {
      animation-name: homepageSlideIn;
    }

    @include breakpoint(md) {
      font-size: rem(32);
    }

    @include breakpoint(lg) {
      font-weight: $font-weight-normal;
      font-size: $typescale-10;
    }
  }

  .homepage-subtext--final {
    font-weight: $font-weight-semibold;
    font-size: $typescale-8;

    @include breakpoint(lg) {
      font-weight: $font-weight-normal;
      font-size: $typescale-10;
    }
  }
}

.homepage-header__list {
  display: flex;
  margin-top: $spacing-3;
  flex-direction: column;
  animation-play-state: inherit;

  @include breakpoint(md) {
    flex-direction: row;
    margin-top: $spacing-3;
    margin-left: -$spacing-3;
    margin-right: -$spacing-3;
  }

  @include breakpoint(lg) {
    margin-top: $spacing-2;
    margin-left: -$spacing-5;
    margin-right: -$spacing-5;
  }

  li {
    font-size: $typescale-4;
    padding: 0;
    color: $black;

    @include breakpoint(md) {
      border-left: 0;
      padding: $spacing-3 0;
    }

    @include breakpoint(lg) {
      padding: $spacing-4 0;
    }

    p {
      margin-left: $spacing-2;
      padding-bottom: $spacing-3;
      animation: #{$homepage-animation-sub-duration +
        ($homepage-animation-sub-duration / 2)}s ease-in-out;

      @include breakpoint(md) {
        border-bottom: 0;
        margin-left: $spacing-3;
        padding-right: $spacing-3;
        padding-bottom: 0;
      }

      @include breakpoint(lg) {
        margin-left: $spacing-5;
        padding-right: $spacing-5;
      }
    }

    strong {
      color: $navy;
      font-weight: $font-weight-bold;
      animation: #{$homepage-animation-sub-duration +
        ($homepage-animation-sub-duration / 2)}s ease-in-out;
      animation-play-state: inherit;
    }

    &:not(:last-child) {
      margin-bottom: $spacing-3;

      p {
        border-bottom: $gray-light 1px solid;
      }

      @include breakpoint(md) {
        margin-bottom: 0;

        p {
          border-bottom: 0;
          border-right: $gray-light 1px solid;
        }
      }
    }

    @for $i from 1 through 3 {
      .run-animation &:nth-child(#{$i}) {
        p,
        strong {
          animation-delay: #{($homepage-animation-sub-duration) * ($i - 1)}s;
          animation-name: homepageColorFadeInOut#{$i};
        }
      }
    }
  }
}

.homepage-header__container {
  display: flex;
  align-items: flex-end;

  .homepage-title--pause-button,
  .homepage-title--play-button,
  .homepage-title--replay-button {
    z-index: $z-index-homepage-header-button;
  }

  .homepage-title--pause-button {
    display: block;
  }

  .homepage-title--play-button,
  .homepage-title--replay-button {
    display: none;
  }

  .homepage-title--replay-button {
    transform: scaleX(-1);
  }

  .homepage-button {
    width: $spacing-4;
    height: $spacing-4;
    color: $navy;

    @include breakpoint(lg) {
      width: $spacing-5;
      height: $spacing-5;
    }
  }
}

.pause-animation {
  animation-play-state: paused !important;
}
